*** Test Cases ***

Users can create a new account with a username and password
    Given there are no accounts in the system
    When a user creates an account with username "fred" and password "p4ssw@rd"
    Then the system responds with the message "Account created"

Users can login with a valid account
    Given there is an account with username "fred" and password "p4ssw@rd"
    When a user attempts to login with username "fred" and password "p4ssw@rd"
    Then the system responds with the message "Welcome!"

Account information is stored in a database
    Given there is an account with username "fred" and password "p4ssw@rd"
    Then the database contains an active account fred/password

Users cannot login with invalid password
    Given there is an account with username "fred" and password "p4ssw@rd"
    When a user attempts to login with username "fred" and password "bad"
    Then the system responds with the message "Access denied"

Too short   Password should be invalid  12eD5
No numbers  Password should be invalid  asfdssdf

Passwords that do not meet the criteria are invalid
    Passwords that are too short, like 12eD5
    Passwords that are too long, like alfjawlh5flsjw4


*** Keywords ***

Passwords that ${description}, like ${pwd}
    ${status} =  Create User  fred  ${pwd}      
    Should Be Equal  ${status}  Not strong enough

Password should be invalid  [Arguments]  ${pwd}
    ${status} =  Create User  fred  ${pwd}      
    Should Be Equal  ${status}  Not strong enough

Given there are no accounts in the system
    Remove File  ${TEMPDIR}/pwds.txt

When a user creates an account with username "${username}" and password "${password}"
    ${STATUS} =  Create User  ${username}  ${password}      
    Set Test Variable  ${STATUS}

Then the system responds with the message "${message}"
    Should Be Equal  ${STATUS}  ${message}

Given there is an account with username "${username}" and password "${password}"
    Given there are no accounts in the system
    When a user creates an account with username "${username}" and password "${password}"
    Then the system responds with the message "Account created"

When a user attempts to login with username "${username}" and password "${password}"
    ${STATUS} =  Attempt to Login  ${username}  ${password}
    Set Test Variable  ${STATUS}
    
Then the database contains an ${state} account ${username}/${passwor}
    ${db} =  Get File  ${DATABASE}
    Should Contain  ${db}  ${username}\t${password}\t${state}


*** Settings ***

Library         OperatingSystem
Resource        ${INTERFACE}_resource.txt
Suite Setup     Open Login Page
Suite Teardown  Exit


*** Variables ***

${INTERFACE}  cli
${DATABASE}   ${TEMPDIR}/pwds.txt
